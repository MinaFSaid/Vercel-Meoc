<div class="contaner-fluid p-4">
  <div class="container-fluid">
    <div class="editProfile">Users Managment</div>
    <div class="card m-2 rounded-4 py-2 d-flex align-items-center">

      <div class="col-10 d-flex justify-content-center my-2">


        <div class="col-3">
          <select id="countries"
          (change)="onClinicChange($event)"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            <option selected disabled>Choose a clinic</option>
            <option *ngFor="let clinics of clinicCode" [value]="clinics.clinicId">{{clinics.clinicCode}}</option>
          </select>
        </div>

      <div class="col-4 px-4">
        <input type="email" id="email" (input)="onInputChange($event)" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Email Address" required />
      </div>
      
        <div class="col-3">
          <select id="countries"
          (change)="onRoleChange($event)"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            <option selected disabled>Choose a Role</option>
            <option *ngFor="let role of userRoles" [value]="role.id">{{role.description}}</option>
          </select>
        </div>

        <div class="col-2 d-flex justify-content-center">
          <button (click)="addUser()" class="btn btn-secondary"> Add User</button>

        </div>

      </div>

      <div class="hLine"></div>

      <div class="font-[sans-serif] col-10">
        <table class="min-w-full bg-white">
          <thead class="whitespace-nowrap">
            <tr>
              <th class="p-4 text-left text-sm font-semibold text-black">
                Name
              </th>
              <th class="p-4 text-left text-sm font-semibold text-black">
                Role
              </th>
              <th class="p-4 text-left text-sm font-semibold text-black">
                Assigned Date
              </th>
              <th class="p-4 text-left text-sm font-semibold text-black">
                Active
              </th>
              <th class="p-4 text-left text-sm font-semibold text-black">
                Action
              </th>
            </tr>
          </thead>
          <tbody class="whitespace-nowrap">
            <tr *ngFor="let user of clinicUsers" class="odd:bg-blue-50">
              <td class="p-4 text-sm">
                <div class="flex items-center cursor-pointer w-max">
                  <img src='https://readymadeui.com/profile_4.webp' class="w-9 h-9 rounded-full shrink-0" />
                  <div class="ml-4">
                    <p class="text-sm text-black">{{user.userName}}</p>
                    <p class="text-xs text-gray-500 mt-0.5">{{user.emailAddress}}</p>
                  </div>
                </div>
              </td>
              <td class="px-2 text-sm text-black">
                {{user.role}}
              </td>
              <td class="px-11 text-sm text-black">
                {{user.assignedDate| date:'dd/MM/yyyy'}}
              </td>
              <td class="p-4">
                <label class="relative cursor-pointer">
                  <input type="checkbox" class="sr-only peer" *ngIf="user.isActive" checked />
                  <input type="checkbox" class="sr-only peer" *ngIf="!user.isActive"/>
                  <div
                    class="w-11 h-6 flex items-center bg-gray-300 rounded-full peer peer-checked:after:translate-x-full after:absolute after:left-[2px] peer-checked:after:border-white after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#007bff]">
                  </div>
                </label>
              </td>
              <td class="p-4">
                <button class="mr-4" title="Edit" data-modal-target="static-modal" data-modal-toggle="static-modal" (click)="showModal(user)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 fill-blue-500 hover:fill-blue-700"
                    viewBox="0 0 348.882 348.882">
                    <path
                      d="m333.988 11.758-.42-.383A43.363 43.363 0 0 0 304.258 0a43.579 43.579 0 0 0-32.104 14.153L116.803 184.231a14.993 14.993 0 0 0-3.154 5.37l-18.267 54.762c-2.112 6.331-1.052 13.333 2.835 18.729 3.918 5.438 10.23 8.685 16.886 8.685h.001c2.879 0 5.693-.592 8.362-1.76l52.89-23.138a14.985 14.985 0 0 0 5.063-3.626L336.771 73.176c16.166-17.697 14.919-45.247-2.783-61.418zM130.381 234.247l10.719-32.134.904-.99 20.316 18.556-.904.99-31.035 13.578zm184.24-181.304L182.553 197.53l-20.316-18.556L294.305 34.386c2.583-2.828 6.118-4.386 9.954-4.386 3.365 0 6.588 1.252 9.082 3.53l.419.383c5.484 5.009 5.87 13.546.861 19.03z"
                      data-original="#000000" />
                    <path
                      d="M303.85 138.388c-8.284 0-15 6.716-15 15v127.347c0 21.034-17.113 38.147-38.147 38.147H68.904c-21.035 0-38.147-17.113-38.147-38.147V100.413c0-21.034 17.113-38.147 38.147-38.147h131.587c8.284 0 15-6.716 15-15s-6.716-15-15-15H68.904C31.327 32.266.757 62.837.757 100.413v180.321c0 37.576 30.571 68.147 68.147 68.147h181.798c37.576 0 68.147-30.571 68.147-68.147V153.388c.001-8.284-6.715-15-14.999-15z"
                      data-original="#000000" />
                  </svg>
                </button>
                
                <button title="Delete" (click)="deleteUser(user.userId)">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-5 fill-red-500 hover:fill-red-700"
                    viewBox="0 0 24 24">
                    <path
                      d="M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z"
                      data-original="#000000" />
                    <path d="M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z"
                      data-original="#000000" />
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isModalVisible" id="static-modal" tabindex="-1" aria-hidden="true" class="fixed inset-0 z-50 flex justify-center items-center w-full h-full">
          <div class="relative p-4 w-full max-w-2xl max-h-full">
              <!-- Modal content -->
              <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                  <!-- Modal header -->
                  <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                      <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                          {{modalUserName.userName}}
                      </h3>
                      <button (click)="hideModal()" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                          </svg>
                          <span class="sr-only">Close modal</span>
                      </button>
                  </div>
                  <!-- Modal body -->
                  <div class="d-flex justify-content-around align-items-center">

              
                    <div class="col-4 px-2">
                      <input type="email" id="email" (input)="onInputChange($event)" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Email Address" required />
                    </div>
                    
                      <div class="col-4 px-2">
                        <select id="countries"
                        (change)="onRoleChange($event)"
                          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                          <option selected disabled>Choose a Role</option>
                          <option *ngFor="let role of userRoles" [value]="role.id">{{role.description}}</option>
                        </select>
                      </div>
              
                      <div class="col-2 px-2">

                          <label class="relative cursor-pointer">
                            <input type="checkbox" class="sr-only peer" checked />
                            <div
                              class="w-11 h-6 flex items-center bg-gray-300 rounded-full peer peer-checked:after:translate-x-full after:absolute after:left-[2px] peer-checked:after:border-white after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#007bff]">
                            </div>
                          </label>

                      </div>
                   
                  </div>
                  <!-- Modal footer -->
                  <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600">
                      <button (click)="accept()" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">I accept</button>
                      <button (click)="decline()" type="button" class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">Decline</button>
                  </div>
              </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>



